/*!
   Copyright 2015-2020 SpryMedia Ltd.

 This source file is free software, available under the following license:
   MIT license - http://datatables.net/license/mit

 This source file is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.

 For details please refer to: http://www.datatables.net
 RowReorder 1.2.8
 2015-2020 SpryMedia Ltd - datatables.net/license
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,f,e){a instanceof String&&(a=String(a));for(var l=a.length,g=0;g<l;g++){var q=a[g];if(f.call(e,q,g,a))return{i:g,v:q}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,f,e){if(a==Array.prototype||a==Object.prototype)return a;a[f]=e.value;return a};$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var f=0;f<a.length;++f){var e=a[f];if(e&&e.Math==Math)return e}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,f){var e=$jscomp.propertyToPolyfillSymbol[f];if(null==e)return a[f];e=a[e];return void 0!==e?e:a[f]};
$jscomp.polyfill=function(a,f,e,l){f&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,f,e,l):$jscomp.polyfillUnisolated(a,f,e,l))};$jscomp.polyfillUnisolated=function(a,f,e,l){e=$jscomp.global;a=a.split(".");for(l=0;l<a.length-1;l++){var g=a[l];if(!(g in e))return;e=e[g]}a=a[a.length-1];l=e[a];f=f(l);f!=l&&null!=f&&$jscomp.defineProperty(e,a,{configurable:!0,writable:!0,value:f})};
$jscomp.polyfillIsolated=function(a,f,e,l){var g=a.split(".");a=1===g.length;l=g[0];l=!a&&l in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var q=0;q<g.length-1;q++){var t=g[q];if(!(t in l))return;l=l[t]}g=g[g.length-1];e=$jscomp.IS_SYMBOL_NATIVE&&"es6"===e?l[g]:null;f=f(e);null!=f&&(a?$jscomp.defineProperty($jscomp.polyfills,g,{configurable:!0,writable:!0,value:f}):f!==e&&($jscomp.propertyToPolyfillSymbol[g]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(g):$jscomp.POLYFILL_PREFIX+g,g=
$jscomp.propertyToPolyfillSymbol[g],$jscomp.defineProperty(l,g,{configurable:!0,writable:!0,value:f})))};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(f,e){return $jscomp.findInternal(this,f,e).v}},"es6","es3");
(function(a){"function"===typeof define&&define.amd?define(["jquery","datatables.net"],function(f){return a(f,window,document)}):"object"===typeof exports?module.exports=function(f,e){f||(f=window);e&&e.fn.dataTable||(e=require("datatables.net")(f,e).$);return a(e,f,f.document)}:a(jQuery,window,document)})(function(a,f,e,l){var g=a.fn.dataTable,q=function(b,c){if(!g.versionCheck||!g.versionCheck("1.10.8"))throw"DataTables RowReorder requires DataTables 1.10.8 or newer";this.c=a.extend(!0,{},g.defaults.rowReorder,
q.defaults,c);this.s={bodyTop:null,dt:new g.Api(b),getDataFn:g.ext.oApi._fnGetObjectDataFn(this.c.dataSrc),middles:null,scroll:{},scrollInterval:null,setDataFn:g.ext.oApi._fnSetObjectDataFn(this.c.dataSrc),start:{top:0,left:0,offsetTop:0,offsetLeft:0,nodes:[]},windowHeight:0,documentOuterHeight:0,domCloneOuterHeight:0};this.dom={clone:null,cloneParent:null,dtScroll:a("div.dataTables_scrollBody",this.s.dt.table().container())};b=this.s.dt.settings()[0];if(c=b.rowreorder)return c;this.dom.dtScroll.length||
(this.dom.dtScroll=a(this.s.dt.table().container(),"tbody"));b.rowreorder=this;this._constructor()};a.extend(q.prototype,{_constructor:function(){var b=this,c=this.s.dt,d=a(c.table().node());"static"===d.css("position")&&d.css("position","relative");a(c.table().container()).on("mousedown.rowReorder touchstart.rowReorder",this.c.selector,function(h){if(b.c.enable){if(a(h.target).is(b.c.excludedChildren))return!0;var k=a(this).closest("tr"),m=c.row(k);if(m.any())return b._emitEvent("pre-row-reorder",
{node:m.node(),index:m.index()}),b._mouseDown(h,k),!1}});c.on("destroy.rowReorder",function(){a(c.table().container()).off(".rowReorder");c.off(".rowReorder")})},_cachePositions:function(){var b=this.s.dt,c=a(b.table().node()).find("thead").outerHeight(),d=a.unique(b.rows({page:"current"}).nodes().toArray());d=a.map(d,function(h,k){k=a(h).position().top-c;return(k+k+a(h).outerHeight())/2});this.s.middles=d;this.s.bodyTop=a(b.table().body()).offset().top;this.s.windowHeight=a(f).height();this.s.documentOuterHeight=
a(e).outerHeight()},_clone:function(b){var c=a(this.s.dt.table().node().cloneNode(!1)).addClass("dt-rowReorder-float").append("<tbody/>").append(b.clone(!1)),d=b.outerWidth(),h=b.outerHeight(),k=a(a(this.s.dt.table().node()).parent()),m=k.width();k=k.scrollLeft();var n=b.children().map(function(){return a(this).width()});c.width(d).height(h).find("tr").children().each(function(r){this.style.width=n[r]+"px"});b=a("<div>").addClass("dt-rowReorder-float-parent").width(m).append(c).appendTo("body").scrollLeft(k);
this.dom.clone=c;this.dom.cloneParent=b;this.s.domCloneOuterHeight=c.outerHeight()},_clonePosition:function(b){var c=this.s.start,d=this._eventToPage(b,"Y")-c.top;b=this._eventToPage(b,"X")-c.left;var h=this.c.snapX;d+=c.offsetTop;c=!0===h?c.offsetLeft:"number"===typeof h?c.offsetLeft+h:b+c.offsetLeft+this.dom.cloneParent.scrollLeft();0>d?d=0:d+this.s.domCloneOuterHeight>this.s.documentOuterHeight&&(d=this.s.documentOuterHeight-this.s.domCloneOuterHeight);this.dom.cloneParent.css({top:d,left:c})},
_emitEvent:function(b,c){this.s.dt.iterator("table",function(d,h){a(d.nTable).triggerHandler(b+".dt",c)})},_eventToPage:function(b,c){return-1!==b.type.indexOf("touch")?b.originalEvent.touches[0]["page"+c]:b["page"+c]},_mouseDown:function(b,c){var d=this,h=this.s.dt,k=this.s.start,m=c.offset();k.top=this._eventToPage(b,"Y");k.left=this._eventToPage(b,"X");k.offsetTop=m.top;k.offsetLeft=m.left;k.nodes=a.unique(h.rows({page:"current"}).nodes().toArray());this._cachePositions();this._clone(c);this._clonePosition(b);
this.dom.target=c;c.addClass("dt-rowReorder-moving");a(e).on("mouseup.rowReorder touchend.rowReorder",function(n){d._mouseUp(n)}).on("mousemove.rowReorder touchmove.rowReorder",function(n){d._mouseMove(n)});a(f).width()===a(e).width()&&a(e.body).addClass("dt-rowReorder-noOverflow");b=this.dom.dtScroll;this.s.scroll={windowHeight:a(f).height(),windowWidth:a(f).width(),dtTop:b.length?b.offset().top:null,dtLeft:b.length?b.offset().left:null,dtHeight:b.length?b.outerHeight():null,dtWidth:b.length?b.outerWidth():
null}},_mouseMove:function(b){this._clonePosition(b);for(var c=this._eventToPage(b,"Y")-this.s.bodyTop,d=this.s.middles,h=null,k=this.s.dt,m=0,n=d.length;m<n;m++)if(c<d[m]){h=m;break}null===h&&(h=d.length);if(null===this.s.lastInsert||this.s.lastInsert!==h)c=a.unique(k.rows({page:"current"}).nodes().toArray()),h>this.s.lastInsert?this.dom.target.insertAfter(c[h-1]):this.dom.target.insertBefore(c[h]),this._cachePositions(),this.s.lastInsert=h;this._shiftScroll(b)},_mouseUp:function(b){var c=this,d=
this.s.dt,h,k=this.c.dataSrc;this.dom.clone.remove();this.dom.cloneParent.remove();this.dom.clone=null;this.dom.cloneParent=null;this.dom.target.removeClass("dt-rowReorder-moving");a(e).off(".rowReorder");a(e.body).removeClass("dt-rowReorder-noOverflow");clearInterval(this.s.scrollInterval);this.s.scrollInterval=null;var m=this.s.start.nodes,n=a.unique(d.rows({page:"current"}).nodes().toArray()),r={},u=[],v=[],w=this.s.getDataFn,B=this.s.setDataFn;var p=0;for(h=m.length;p<h;p++)if(m[p]!==n[p]){var x=
d.row(n[p]).id(),C=d.row(n[p]).data(),y=d.row(m[p]).data();x&&(r[x]=w(y));u.push({node:n[p],oldData:w(C),newData:w(y),newPosition:p,oldPosition:a.inArray(n[p],m)});v.push(n[p])}var z=[u,{dataSrc:k,nodes:v,values:r,triggerRow:d.row(this.dom.target),originalEvent:b}];this._emitEvent("row-reorder",z);var A=function(){if(c.c.update){p=0;for(h=u.length;p<h;p++){var D=d.row(u[p].node).data();B(D,u[p].newData);d.columns().every(function(){this.dataSrc()===k&&d.cell(u[p].node,this.index()).invalidate("data")})}c._emitEvent("row-reordered",
z);d.draw(!1)}};this.c.editor?(this.c.enable=!1,this.c.editor.edit(v,!1,a.extend({submit:"changed"},this.c.formOptions)).multiSet(k,r).one("preSubmitCancelled.rowReorder",function(){c.c.enable=!0;c.c.editor.off(".rowReorder");d.draw(!1)}).one("submitUnsuccessful.rowReorder",function(){d.draw(!1)}).one("submitSuccess.rowReorder",function(){A()}).one("submitComplete",function(){c.c.enable=!0;c.c.editor.off(".rowReorder")}).submit()):A()},_shiftScroll:function(b){var c=this,d=this.s.scroll,h=!1,k=b.pageY-
e.body.scrollTop,m,n;k<a(f).scrollTop()+65?m=-5:k>d.windowHeight+a(f).scrollTop()-65&&(m=5);null!==d.dtTop&&b.pageY<d.dtTop+65?n=-5:null!==d.dtTop&&b.pageY>d.dtTop+d.dtHeight-65&&(n=5);m||n?(d.windowVert=m,d.dtVert=n,h=!0):this.s.scrollInterval&&(clearInterval(this.s.scrollInterval),this.s.scrollInterval=null);!this.s.scrollInterval&&h&&(this.s.scrollInterval=setInterval(function(){if(d.windowVert){var r=a(e).scrollTop();a(e).scrollTop(r+d.windowVert);r!==a(e).scrollTop()&&(r=parseFloat(c.dom.cloneParent.css("top")),
c.dom.cloneParent.css("top",r+d.windowVert))}d.dtVert&&(r=c.dom.dtScroll[0],d.dtVert&&(r.scrollTop+=d.dtVert))},20))}});q.defaults={dataSrc:0,editor:null,enable:!0,formOptions:{},selector:"td:first-child",snapX:!1,update:!0,excludedChildren:"a"};var t=a.fn.dataTable.Api;t.register("rowReorder()",function(){return this});t.register("rowReorder.enable()",function(b){b===l&&(b=!0);return this.iterator("table",function(c){c.rowreorder&&(c.rowreorder.c.enable=b)})});t.register("rowReorder.disable()",function(){return this.iterator("table",
function(b){b.rowreorder&&(b.rowreorder.c.enable=!1)})});q.version="1.2.8";a.fn.dataTable.RowReorder=q;a.fn.DataTable.RowReorder=q;a(e).on("init.dt.dtr",function(b,c,d){"dt"===b.namespace&&(b=c.oInit.rowReorder,d=g.defaults.rowReorder,b||d)&&(d=a.extend({},b,d),!1!==b&&new q(c,d))});return q});
